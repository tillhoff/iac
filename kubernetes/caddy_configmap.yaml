apiVersion: v1
kind: ConfigMap
metadata:
  name: caddy-configuration
  labels:
    app: caddy
data:
  Caddyfile: |
    tls info@enforge.de {
      ca https://acme-staging.api.letsencrypt.org/directory
    }
    alpha.enforge.de {
    	respond "You are now securely on the caddy within kubernetes! Well done!"
    }
    alpha-centauri.enforge.de {
      respond "You are now securely on the caddy within kubernetes! Good job!"
    }
    pw.enforge.de {
      reverse_proxy http://bitwarden-service.default.svc.cluster.local
    }
    push.enforge.de {
      reverse_proxy http://gotify-service.default.svc.cluster.local
    }
    :9999 {
      respond "I'm healthy!"
      #redir alpha-centauri.enforge.de{uri}
      #reverse_proxy caddy-service.default.svc.cluster.local
    }
