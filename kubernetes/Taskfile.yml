# https://taskfile.dev

version: '3'

tasks:

  deploy:
    cmds:
      - task: deploy:caddy

  deploy:caddy:
    cmds:
      - task: deploy:caddy:configmap
      - task: deploy:caddy:service
      - task: deploy:caddy:deployment
  deploy:caddy:deployment:
    cmds:
      # - cmd: kubectl create namespace web
      #   ignore_error: true
      - kubectl apply -f ./caddy_deployment.yaml
  deploy:caddy:service:
    cmds:
      # - cmd: kubectl create namespace web
      #   ignore_error: true
      - kubectl apply -f ./caddy_service.yaml
  deploy:caddy:configmap:
    cmds:
      # - cmd: kubectl create namespace web
      #   ignore_error: true
      - kubectl apply -f ./caddy_configmap.yaml